<!DOCTYPE html>
    <html class="flex h-full w-full flex-col flex-nowrap" lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="https://vchirikov.ru/assets/style.f2262c92.css">
        <script>document.documentElement.setAttribute('data-theme',window.localStorage.getItem('theme'))</script>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="color-scheme" content="dark light" />
        <link rel="apple-touch-icon" sizes="180x180" href="https://vchirikov.ru/apple-touch-icon.png" />
        <link rel="icon" type="image/png" sizes="32x32" href="https://vchirikov.ru/favicon-32x32.png" />
        <link rel="icon" type="image/png" sizes="16x16" href="https://vchirikov.ru/favicon-16x16.png" />
        <link rel="icon" href="https://vchirikov.ru/favicon.ico" />
        <link rel="manifest" href="https://vchirikov.ru/site.webmanifest" />
        <script>(e=>{let t=e=>e&&e.hasAttribute&&(e.hasAttribute("data-hk")?e:t(e.host&&e.host instanceof Node?e.host:e.parentNode));["click", "input"].forEach((o=>document.addEventListener(o,(o=>{let s=o.composedPath&&o.composedPath()[0]||o.target,a=t(s);a&&!e.completed.has(a)&&e.events.push([a,o])}))))})(window._$HY||(_$HY={events:[],completed:new WeakSet,r:{},fe(){},init(e,t){_$HY.r[e]=[new Promise((e=>t=e)),t]},set(e,t,o){(o=_$HY.r[e])&&o[1](t),_$HY.r[e]=[t]},unset(e){delete _$HY.r[e]},load:e=>_$HY.r[e]}));</script><!--xs-->
        <title data-sm="0-0-0-0-0-0-0-6-1-0-0-0">Ansible on Windows | Vladimir Chirikov</title><meta data-sm="0-0-0-0-0-0-0-6-1-0-1-0" name="description" content="Today we will run Ansible as a control node on Windows + small talk about VS Code as IDE for Ansible."/><meta data-sm="0-0-0-0-0-0-0-6-1-0-2-0" name="author" content="Vladimir Chirikov"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-3-0" property="og:url" content="https://vchirikov.ru/post/ansible-on-windows/"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-4-0" property="og:title" content="Ansible on Windows. Today we will run Ansible as a control node on Windows + small talk about VS Code as IDE for Ansible."/><meta data-sm="0-0-0-0-0-0-0-6-1-0-5-0" property="og:description" content="Today we will run Ansible as a control node on Windows + small talk about VS Code as IDE for Ansible."/><meta data-sm="0-0-0-0-0-0-0-6-1-0-6-0" property="og:locale" content="en"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-7-0" property="og:site_name" content="Vladimir Chirikov"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-9-0-0" property="og:type" content="article"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-9-1-0" property="og:image" content="https://vchirikov.ru/assets/img/generated/en/ansible-on-windows/a66f2833bc47572deaedc29f198439f0901ccea2.og.png"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-9-2-0" name="twitter:card" content="summary_large_image"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-9-3-0" property="article:published_time" content="2022-11-24T00:00:00.000Z"/><meta data-sm="0-0-0-0-0-0-0-6-1-0-9-4-0" property="article:modified_time" content="2022-12-22T00:00:00.000Z"/>
      </head>
      <body class="flex flex-1 flex-col flex-nowrap">
        <div id="app"><!e0-0-0-0-0-0-0><div data-hk="0-0-0-0-0-0-0-0" class="drawer drawer-end"><input id="drawer" type="checkbox" class="drawer-toggle"><!--#--><input data-hk="0-0-0-0-0-0-0-1-0" type="checkbox" id="search-modal" class="modal-toggle"><label data-hk="0-0-0-0-0-0-0-1-1" for="search-modal" class="modal cursor-pointer"><label class="modal-box border-base-content/5 relative flex max-h-[83%] min-h-[50%] w-11/12 max-w-5xl flex-col items-stretch border p-0 shadow" for=""><div class="bg-base-300 flex h-14 flex-row flex-nowrap items-center justify-between"><div class="form-control ml-4 h-14 flex-1 justify-center"><div class="h-9"><input data-hk="0-0-0-0-0-0-0-1-2-0" tabindex="0" type="text" placeholder="Search" class="input-bordered input h-full w-full opacity-50 transition-opacity hover:opacity-80 focus:opacity-80"></div></div><label for="search-modal" class="btn-sm btn-circle btn mx-2">✕</label></div><div class="bg-base-200 flex w-full flex-1 flex-col flex-nowrap overscroll-none"><div data-hk="0-0-0-0-0-0-0-1-3-0-3" class="flex flex-1 flex-row flex-nowrap items-center justify-center"><div><!--#-->Type a query into the input<!--/-->&nbsp;<pre class="kbd kbd-md text-primary inline">^^^</pre></div></div></div></label></label><!--/--><div class="drawer-content flex flex-1 flex-col flex-nowrap items-stretch"><div class="navbar border-base-content/5 bg-base-100 shadow-base-content z-10 select-none border-b drop-shadow-lg"><div class="flex-1"><!--#--><a data-hk="0-0-0-0-0-0-0-2-0" tabIndex="0" href="/en/" class="btn-ghost btn-circle avatar btn" ><div data-hk="0-0-0-0-0-0-0-2-1" class="w-12 rounded-full"><img alt="ava" src="https://vchirikov.ru/assets/img/ava.jpg"></div></a><!--/--><!--#--><a data-hk="0-0-0-0-0-0-0-3-0" href="/en/" class="prose-sm prose md:prose-xl mx-2 font-semibold" >Vladimir Chirikov</a><!--/--></div><div class="block sm:hidden"><label for="drawer" class="drawer-button btn btn-sm btn-ghost"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-6 h-6 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></label></div><div class="hidden flex-row-reverse gap-2 sm:flex"><label for="search-modal" class="input-bordered input h-9 select-none leading-9 opacity-50 transition-opacity hover:opacity-80 focus:opacity-80 sm:w-32 md:w-48 lg:w-64">Search</label><div class="flex flex-row items-center"><!--#--><div data-hk="0-0-0-0-0-0-0-4-0" class="opacity-50 transition-opacity hover:opacity-80"><a data-hk="0-0-0-0-0-0-0-4-1-0" href="/en/post/ansible-on-windows" class="btn-xs btn m-1 active" aria-current="page">EN</a></div><div data-hk="0-0-0-0-0-0-0-4-2" class="opacity-50 transition-opacity hover:opacity-80"><a data-hk="0-0-0-0-0-0-0-4-3-0" href="/ru/post/ansible-on-windows" class="btn-xs btn m-1 active" aria-current="page">RU</a></div><!--/--><!--#--><div data-hk="0-0-0-0-0-0-0-5-0" class="dropdown-end dropdown px-1"><label tabindex="0" class="link text-current opacity-40 hover:text-current hover:opacity-80"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11.334 14c.584 2.239 2.001 2.547 2.001 4.02 0 1.094-.896 1.98-2.001 1.98-1.104 0-2.015-.887-2.015-1.98 0-1.473 1.432-1.781 2.015-4.02zm12.666-2c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5.205-7.316l-2.641 2.316h2.791l1.085-.935c-.37-.498-.782-.96-1.235-1.381zm3.205 7.316c0-1.527-.354-2.969-.969-4.265l-4.486 3.902c-1.402 1.226-2.126.041-3.911 1.091-.237.141-.486.185-.71.158-.566-.07-1.018-.594-.941-1.216.024-.205.113-.419.267-.633 1.128-1.571.183-2.49 1.553-3.68l4.435-3.86c-1.527-.943-3.317-1.497-5.238-1.497-5.514 0-10 4.486-10 10s4.486 10 10 10 10-4.486 10-10z"></path></svg></label><div tabindex="0" class="dropdown-content rounded-box btn-group btn-group-vertical bg-base-100 mt-2 w-28 p-0 shadow"><button class="btn-ghost btn">Dark</button><button class="btn-active btn">Light</button><button class="btn-ghost btn">Berloga</button></div></div><!--/--></div></div></div><div class="bg-base-300 flex flex-1 flex-col flex-nowrap"><div class="border-secondary-content/5 bg-base-100 m-3 mx-auto w-full max-w-[78rem] flex-1 rounded-md border shadow"><div data-hk="0-0-0-0-0-0-0-6-0" class="flex flex-1 flex-col flex-nowrap pb-3"><script data-hk="0-0-0-0-0-0-0-6-1-0-9-5" type="application/ld+json">
        {
          "description": "Today we will run Ansible as a control node on Windows + small talk about VS Code as IDE for Ansible.",
          "author": {
            "@type": "Person",
            "name": "Vladimir Chirikov"
          },
          "@type": "BlogPosting",
          "url": "https://vchirikov.ru/post/ansible-on-windows/",
          "publisher": {
            "@type": "Organization",
            "logo": {
              "@type": "ImageObject",
              "url": "https://vchirikov.ru/assets/img/generated/en/ansible-on-windows/a66f2833bc47572deaedc29f198439f0901ccea2.og.png"
            },
            "name": "Vladimir Chirikov"
          },
          "headline": "Ansible on Windows | Vladimir Chirikov",
          "image": ["https://vchirikov.ru/assets/img/generated/en/ansible-on-windows/a66f2833bc47572deaedc29f198439f0901ccea2"],
          "datePublished": "2022-11-24T00:00:00.000Z",
          "dateModified": "2022-12-22T00:00:00.000Z",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://vchirikov.ru/post/ansible-on-windows/"
          },
          "@context": "http://schema.org"
        }</script><figure data-hk="0-0-0-0-0-0-0-6-1-1" class="w-full select-none"><img class="w-full rounded rounded-t-md" alt="image for post" src="https://vchirikov.ru/assets/img/generated/en/ansible-on-windows/a66f2833bc47572deaedc29f198439f0901ccea2.svg"></figure><div data-hk="0-0-0-0-0-0-0-6-1-2" class="text mt-3 flex w-full flex-row items-center justify-between px-4 text-sm"><!--#--><div data-hk="0-0-0-0-0-0-0-6-1-3-0" class="breadcrumbs text-sm"><ul><li><a data-hk="0-0-0-0-0-0-0-6-1-3-1-0" href="https://vchirikov.ru" rel="nofollow external" class="opacity-80 transition-opacity hover:opacity-100 focus:opacity-100" ><svg data-hk="0-0-0-0-0-0-0-6-1-3-1-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="mr-2 h-4 w-4 stroke-current"><path d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>Index</a></li><li><a data-hk="0-0-0-0-0-0-0-6-1-3-2-0" href="/en/post/ansible-on-windows" class="active" aria-current="page"><svg data-hk="0-0-0-0-0-0-0-6-1-3-2-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="mr-2 h-4 w-4 stroke-current"><path d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Ansible on Windows</a></li></ul></div><!--/--><button class="btn btn-xs btn-ghost gap-2"><!--#-->Back<!--/--><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="h-4 w-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"></path></svg></button></div><article data-hk="0-0-0-0-0-0-0-6-1-4" class="prose-neutral prose prose-img:mx-auto prose-img:select-none mt-6 h-full w-full max-w-none px-3 lg:px-5"><!e0-0-0-0-0-0-0-6-1-5-0><div data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-0"><h1 data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-3-0" id="ansible" ><a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-2-0" class="anchor " aria-hidden="true" tabindex="-1" href="#ansible" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-1-0" class="icon icon-link "></span></a>Ansible</h1>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-5-0" ><a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-4-0" href="https://www.redhat.com/en/technologies/management/ansible" target="_blank" rel="noopener noreferrer" >Ansible</a> - is an automation platform, which is built on imperative approach.</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-6-0" >Unlike Terraform with its declarative approach, here we do not describe the state we want to achieve,
but describe the way to achieve this state, while Ansible gives us idempotence (in simple words
, multiple runs will not lead to a change in the final state, for example, running the playbook (a set of actions)
of nginx installation 5 times, we won't get 5 reinstallations of the package,but just one installation and 4 checks that it is already there, and no action is required).</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-8-0" >That's Ansible in short and I don't want to tell more about it, because Ansible has a great docs and community, you can
find it without me anyway. Let's go further to the interest point: <strong data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-7-0" >Ansible do not support Windows as a control node</strong>,
only unix-like systems are supported. Well, for these cases Windows has the WSL, which we will use for it.
Just in case there is another way to use Ansible with devContainers.</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-10-0" >I use WSL 2 with Ubuntu, <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-9-0" >ubuntu config --default-user root</code>:</p>
<pre data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-108-0" class="language-bash " ><code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-107-0" class="language-bash code-highlight " ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-11-0" class="code-line line-number " line="1" >wsl
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-13-0" class="code-line line-number " line="2" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-12-0" class="token comment " ># let's install latest python, because ubuntu has an old one</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-14-0" class="code-line line-number " line="3" >add-apt-repository ppa:deadsnakes/ppa
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-16-0" class="code-line line-number " line="4" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-15-0" class="token function " >apt-get</span> update
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-20-0" class="code-line line-number " line="5" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-17-0" class="token function " >apt-get</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-18-0" class="token function " >install</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-19-0" class="token parameter variable " >-y</span> python3.11 libffi-dev libssl-dev 
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-22-0" class="code-line line-number " line="6" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-21-0" class="token comment " ># I don't know much about python ecosystem around venv, 2.7 &amp; 3 wars, </span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-24-0" class="code-line line-number " line="7" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-23-0" class="token comment " ># I just want to use something like python-is-python3 ¯\(°_o)/¯</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-27-0" class="code-line line-number " line="8" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-25-0" class="token function " >ln</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-26-0" class="token parameter variable " >-s</span> /usr/bin/python3.11 /usr/bin/python
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-30-0" class="code-line line-number " line="9" >update-alternatives <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-28-0" class="token parameter variable " >--install</span> /usr/bin/python3 python3 /usr/bin/python3.11 <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-29-0" class="token number " >1</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-32-0" class="code-line line-number " line="10" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-31-0" class="token comment " ># We don't need to store old Ubuntu packages</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-38-0" class="code-line line-number " line="11" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-33-0" class="token function " >apt</span> remove <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-34-0" class="token parameter variable " >--purge</span> python3-apt <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-35-0" class="token operator " >&amp;&amp;</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-36-0" class="token function " >apt</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-37-0" class="token function " >install</span> python3-apt
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-41-0" class="code-line line-number " line="12" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-39-0" class="token function " >apt</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-40-0" class="token function " >install</span> python3.11-distutils
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-43-0" class="code-line line-number " line="13" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-42-0" class="token comment " ># check</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-45-0" class="code-line line-number " line="14" >update-alternatives <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-44-0" class="token parameter variable " >--config</span> python3
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-47-0" class="code-line line-number " line="15" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-46-0" class="token parameter variable " >--version</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-49-0" class="code-line line-number " line="16" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-48-0" class="token comment " ># install pip</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-52-0" class="code-line line-number " line="17" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-50-0" class="token parameter variable " >-m</span> ensurepip <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-51-0" class="token parameter variable " >--upgrade</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-54-0" class="code-line line-number " line="18" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-53-0" class="token comment " ># In case if you don't have ensurepip  ^^^:</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-56-0" class="code-line line-number " line="19" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-55-0" class="token comment " ># curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-58-0" class="code-line line-number " line="20" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-57-0" class="token comment " ># python get-pip.py</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-60-0" class="code-line line-number " line="21" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-59-0" class="token comment " ># check pip:</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-63-0" class="code-line line-number " line="22" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-61-0" class="token parameter variable " >-m</span> pip <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-62-0" class="token parameter variable " >-V</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-65-0" class="code-line line-number " line="23" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-64-0" class="token comment " ># upgrade pip</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-69-0" class="code-line line-number " line="24" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-66-0" class="token parameter variable " >-m</span> pip <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-67-0" class="token function " >install</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-68-0" class="token parameter variable " >--upgrade</span> pip
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-70-0" class="code-line line-number " line="25" >
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-72-0" class="code-line line-number " line="26" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-71-0" class="token comment " >## let's add pip scripts to PATH (if wsl is under root)</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-76-0" class="code-line line-number " line="27" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-73-0" class="token builtin class-name " >echo</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-74-0" class="token string " >'PATH=$PATH:/root/.local/bin/'</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-75-0" class="token operator " >>></span> ~/.bashrc
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-78-0" class="code-line line-number " line="28" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-77-0" class="token builtin class-name " >.</span> ~/.bashrc
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-79-0" class="code-line line-number " line="29" >
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-81-0" class="code-line line-number " line="30" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-80-0" class="token comment " ># let's check venv, use in /tmp/ or in git repo where you can wipe new files</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-84-0" class="code-line line-number " line="31" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-82-0" class="token parameter variable " >-m</span> venv <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-83-0" class="token function " >env</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-86-0" class="code-line line-number " line="32" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-85-0" class="token comment " ># if you see something like:</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-88-0" class="code-line line-number " line="33" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-87-0" class="token comment " ># Error: Command ... returned non-zero exit status 1</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-90-0" class="code-line line-number " line="34" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-89-0" class="token comment " ># you should install venv</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-93-0" class="code-line line-number " line="35" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-91-0" class="token function " >apt</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-92-0" class="token function " >install</span> python3.11-venv
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-94-0" class="code-line line-number " line="36" >
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-96-0" class="code-line line-number " line="37" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-95-0" class="token comment " ># install ansible via pip, if you want to automate Windows machines install pywinrm too</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-100-0" class="code-line line-number " line="38" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-97-0" class="token parameter variable " >-m</span> pip <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-98-0" class="token function " >install</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-99-0" class="token parameter variable " >--user</span> ansible pywinrm
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-101-0" class="code-line line-number " line="39" >
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-103-0" class="code-line line-number " line="40" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-102-0" class="token comment " ># The best linter which works with vscode &amp; redhat ansible plugin</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-106-0" class="code-line line-number " line="41" >python <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-104-0" class="token parameter variable " >-m</span> pip <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-105-0" class="token function " >install</span> ansible-lint
</span></code></pre>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-110-0" >As IDE for Ansible I use vscode with these extensions (<code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-109-0" >.vscode/extensions.json</code>):</p>
<pre data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-127-0" class="language-json " ><code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-126-0" class="language-json code-highlight " ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-112-0" class="code-line line-number " line="1" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-111-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-116-0" class="code-line line-number " line="2" >  <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-113-0" class="token property " >"recommendations"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-114-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-115-0" class="token punctuation " >[</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-119-0" class="code-line line-number " line="3" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-117-0" class="token string " >"redhat.ansible"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-118-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-121-0" class="code-line line-number " line="4" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-120-0" class="token string " >"mattiasbaake.vscode-snippets-for-ansible"</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-123-0" class="code-line line-number " line="5" >  <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-122-0" class="token punctuation " >]</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-125-0" class="code-line line-number " line="6" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-124-0" class="token punctuation " >}</span>
</span></code></pre>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-129-0" >The first one is an official plugin for Ansible from RedHat, the second is generated snippets from
<a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-128-0" href="https://docs.ansible.com/ansible/latest/collections/" target="_blank" rel="noopener noreferrer" >Ansible collections</a>.</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-132-0" >Let's run <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-130-0" >code .</code> in WSL to install vscode server, after start we will get an error about <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-131-0" >ansible-lint</code>,
because vs code plugin under wsl uses wrong projectDir.</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-135-0" >Workaround is creation of <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-133-0" >.config/ansible-lint.yml</code> in the repo, and ansible-lint will find the right <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-134-0" >--project-dir</code>.</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-138-0" >You are ready to write playbooks, but run with <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-136-0" >ansible-playbook -i inventory.yaml playbook.yaml</code> is too annoying,
let's use a vscode build task on opened playbook file, create <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-137-0" >.vscode/tasks.json</code>:</p>
<pre data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-229-0" class="language-json " ><code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-228-0" class="language-json code-highlight " ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-140-0" class="code-line line-number " line="1" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-139-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-145-0" class="code-line line-number " line="2" >  <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-141-0" class="token property " >"version"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-142-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-143-0" class="token string " >"2.0.0"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-144-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-149-0" class="code-line line-number " line="3" >  <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-146-0" class="token property " >"tasks"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-147-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-148-0" class="token punctuation " >[</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-151-0" class="code-line line-number " line="4" >    <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-150-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-156-0" class="code-line line-number " line="5" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-152-0" class="token property " >"label"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-153-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-154-0" class="token string " >"Run ansible-playbook on current file"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-155-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-161-0" class="code-line line-number " line="6" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-157-0" class="token property " >"command"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-158-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-159-0" class="token string " >"ansible-playbook -i inventory.yaml ${file} --diff"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-160-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-166-0" class="code-line line-number " line="7" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-162-0" class="token property " >"type"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-163-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-164-0" class="token string " >"shell"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-165-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-172-0" class="code-line line-number " line="8" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-167-0" class="token property " >"args"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-168-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-169-0" class="token punctuation " >[</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-170-0" class="token punctuation " >]</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-171-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-178-0" class="code-line line-number " line="9" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-173-0" class="token property " >"problemMatcher"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-174-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-175-0" class="token punctuation " >[</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-176-0" class="token punctuation " >]</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-177-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-182-0" class="code-line line-number " line="10" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-179-0" class="token property " >"presentation"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-180-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-181-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-186-0" class="code-line line-number " line="11" >        <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-183-0" class="token property " >"reveal"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-184-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-185-0" class="token string " >"always"</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-189-0" class="code-line line-number " line="12" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-187-0" class="token punctuation " >}</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-188-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-193-0" class="code-line line-number " line="13" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-190-0" class="token property " >"group"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-191-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-192-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-198-0" class="code-line line-number " line="14" >        <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-194-0" class="token property " >"isDefault"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-195-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-196-0" class="token boolean " >true</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-197-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-202-0" class="code-line line-number " line="15" >        <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-199-0" class="token property " >"kind"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-200-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-201-0" class="token string " >"build"</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-205-0" class="code-line line-number " line="16" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-203-0" class="token punctuation " >}</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-204-0" class="token punctuation " >,</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-209-0" class="code-line line-number " line="17" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-206-0" class="token property " >"options"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-207-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-208-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-213-0" class="code-line line-number " line="18" >        <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-210-0" class="token property " >"env"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-211-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-212-0" class="token punctuation " >{</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-217-0" class="code-line line-number " line="19" >          <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-214-0" class="token property " >"ANSIBLE_DEBUG"</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-215-0" class="token operator " >:</span> <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-216-0" class="token string " >"0"</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-219-0" class="code-line line-number " line="20" >        <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-218-0" class="token punctuation " >}</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-221-0" class="code-line line-number " line="21" >      <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-220-0" class="token punctuation " >}</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-223-0" class="code-line line-number " line="22" >    <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-222-0" class="token punctuation " >}</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-225-0" class="code-line line-number " line="23" >  <span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-224-0" class="token punctuation " >]</span>
</span><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-227-0" class="code-line line-number " line="24" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-226-0" class="token punctuation " >}</span>
</span></code></pre>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-232-0" >So the end, you can run now playbooks with default <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-230-0" >ctrl+shift+b</code> in vscode (but I use <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-231-0" >alt+shift+d</code>).</p>
<p data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-234-0" >If something wrong with playbook you can set <code data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-233-0" >ANSIBLE_DEBUG</code> to 1 and see the full log of a playbook.</p>
<h2 data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-237-0" id="docs" ><a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-236-0" class="anchor " aria-hidden="true" tabindex="-1" href="#docs" ><span data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-235-0" class="icon icon-link "></span></a>Docs</h2>
<ul data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-243-0" >
<li data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-239-0" >Ansible Documentation - <a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-238-0" href="https://docs.ansible.com/ansible/latest/getting_started/index.html" target="_blank" rel="noopener noreferrer" >Getting started with Ansible</a></li>
<li data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-242-0" >Not bad introducing article with real case scenario -<br data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-240-0" />
<a data-hk="0-0-0-0-0-0-0-6-1-5-0-0-0-0-241-0" href="https://dev.to/tangramvision/exploring-ansible-via-setting-up-a-wireguard-vpn-3389" target="_blank" rel="noopener noreferrer" >Exploring Ansible via Setting Up a WireGuard VPN</a></li>
</ul></div><!/e0-0-0-0-0-0-0-6-1-5-0></article></div></div></div><footer class="footer border-base-content/5 bg-neutral text-neutral-content shadow-base-content/20 flex flex-row flex-nowrap items-center justify-between border-t-2 py-2 px-4 md:px-6 lg:py-1"><div class="flex select-none flex-col text-xs leading-3"><p class="opacity-60 transition-opacity hover:opacity-80">Copyright © <!--#-->2023<!--/--></p><p class="opacity-20 transition-opacity hover:opacity-80">Version: <!--#-->0.2.24<!--/--></p></div><div class="flex flex-row flex-nowrap items-center"><a href="https://t.me/+RROSXUhWMNc3NDgy" class="opacity-50 transition-opacity hover:opacity-80 focus:opacity-80"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12,0c-6.627,0 -12,5.373 -12,12c0,6.627 5.373,12 12,12c6.627,0 12,-5.373 12,-12c0,-6.627 -5.373,-12 -12,-12Zm0,2c5.514,0 10,4.486 10,10c0,5.514 -4.486,10 -10,10c-5.514,0 -10,-4.486 -10,-10c0,-5.514 4.486,-10 10,-10Zm2.692,14.889c0.161,0.115 0.368,0.143 0.553,0.073c0.185,-0.07 0.322,-0.228 0.362,-0.42c0.435,-2.042 1.489,-7.211 1.884,-9.068c0.03,-0.14 -0.019,-0.285 -0.129,-0.379c-0.11,-0.093 -0.263,-0.12 -0.399,-0.07c-2.096,0.776 -8.553,3.198 -11.192,4.175c-0.168,0.062 -0.277,0.223 -0.271,0.4c0.006,0.177 0.125,0.33 0.296,0.381c1.184,0.354 2.738,0.847 2.738,0.847c0,0 0.725,2.193 1.104,3.308c0.047,0.139 0.157,0.25 0.301,0.287c0.145,0.038 0.298,-0.001 0.406,-0.103c0.608,-0.574 1.548,-1.461 1.548,-1.461c0,0 1.786,1.309 2.799,2.03Zm-5.505,-4.338l0.84,2.769l0.186,-1.754c0,0 3.243,-2.925 5.092,-4.593c0.055,-0.048 0.062,-0.13 0.017,-0.188c-0.045,-0.057 -0.126,-0.071 -0.188,-0.032c-2.143,1.368 -5.947,3.798 -5.947,3.798Z"></path></svg></a><a href="https://github.com/vchirikov" class="opacity-50 transition-opacity hover:opacity-80 focus:opacity-80"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 6c-3.313 0-6 2.686-6 6 0 2.651 1.719 4.9 4.104 5.693.3.056.396-.13.396-.289v-1.117c-1.669.363-2.017-.707-2.017-.707-.272-.693-.666-.878-.666-.878-.544-.373.041-.365.041-.365.603.042.92.619.92.619.535.917 1.403.652 1.746.499.054-.388.209-.652.381-.802-1.333-.152-2.733-.667-2.733-2.965 0-.655.234-1.19.618-1.61-.062-.153-.268-.764.058-1.59 0 0 .504-.161 1.65.615.479-.133.992-.199 1.502-.202.51.002 1.023.069 1.503.202 1.146-.776 1.648-.615 1.648-.615.327.826.121 1.437.06 1.588.385.42.617.955.617 1.61 0 2.305-1.404 2.812-2.74 2.96.216.186.412.551.412 1.111v1.646c0 .16.096.347.4.288 2.383-.793 4.1-3.041 4.1-5.691 0-3.314-2.687-6-6-6z"></path></svg></a><a href="https://twitter.com/0x4351" class="opacity-50 transition-opacity hover:opacity-80 focus:opacity-80"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.5 8.778c-.441.196-.916.328-1.414.388.509-.305.898-.787 1.083-1.362-.476.282-1.003.487-1.564.597-.448-.479-1.089-.778-1.796-.778-1.59 0-2.758 1.483-2.399 3.023-2.045-.103-3.86-1.083-5.074-2.572-.645 1.106-.334 2.554.762 3.287-.403-.013-.782-.124-1.114-.308-.027 1.14.791 2.207 1.975 2.445-.346.094-.726.116-1.112.042.313.978 1.224 1.689 2.3 1.709-1.037.812-2.34 1.175-3.647 1.021 1.09.699 2.383 1.106 3.773 1.106 4.572 0 7.154-3.861 6.998-7.324.482-.346.899-.78 1.229-1.274z"></path></svg></a></div></footer></div><div class="drawer-side"><label for="drawer" class="drawer-overlay"></label><div class="bg-base-100 text-base-content w-5/6 max-w-2xl"><div class="flex h-full w-full flex-col flex-nowrap items-center justify-start p-3"><label for="search-modal" class="input-bordered input mb-4 h-9 w-full select-none leading-9 opacity-50 transition-opacity hover:opacity-80 focus:opacity-80 ">Search</label><div class="w-full  font-mono text-sm"><!--#-->Settings<!--/-->:</div><div class="border-base-200/40 mt-2 flex w-full flex-row items-center justify-between border-y py-0"><div class="flex flex-row flex-nowrap items-center justify-start"><div data-hk="0-0-0-0-0-0-0-7-0" class="opacity-50 transition-opacity hover:opacity-80"><a data-hk="0-0-0-0-0-0-0-7-1-0" href="/en/post/ansible-on-windows" class="btn-xs btn m-1 active" data-prefetch="false" aria-current="page">EN</a></div><div data-hk="0-0-0-0-0-0-0-7-2" class="opacity-50 transition-opacity hover:opacity-80"><a data-hk="0-0-0-0-0-0-0-7-3-0" href="/ru/post/ansible-on-windows" class="btn-xs btn m-1 active" data-prefetch="false" aria-current="page">RU</a></div></div><!--#--><div data-hk="0-0-0-0-0-0-0-8-0" class="dropdown-end dropdown px-1"><label tabindex="0" class="link text-current opacity-40 hover:text-current hover:opacity-80"><svg class="fill-current" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M11.334 14c.584 2.239 2.001 2.547 2.001 4.02 0 1.094-.896 1.98-2.001 1.98-1.104 0-2.015-.887-2.015-1.98 0-1.473 1.432-1.781 2.015-4.02zm12.666-2c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5.205-7.316l-2.641 2.316h2.791l1.085-.935c-.37-.498-.782-.96-1.235-1.381zm3.205 7.316c0-1.527-.354-2.969-.969-4.265l-4.486 3.902c-1.402 1.226-2.126.041-3.911 1.091-.237.141-.486.185-.71.158-.566-.07-1.018-.594-.941-1.216.024-.205.113-.419.267-.633 1.128-1.571.183-2.49 1.553-3.68l4.435-3.86c-1.527-.943-3.317-1.497-5.238-1.497-5.514 0-10 4.486-10 10s4.486 10 10 10 10-4.486 10-10z"></path></svg></label><div tabindex="0" class="dropdown-content rounded-box btn-group btn-group-vertical bg-base-100 mt-2 w-28 p-0 shadow"><button class="btn-ghost btn">Dark</button><button class="btn-active btn">Light</button><button class="btn-ghost btn">Berloga</button></div></div><!--/--></div></div></div></div></div><!/e0-0-0-0-0-0-0></div>
        <script type="module" src="https://vchirikov.ru/assets/entry-server-routing.d7fa78fe.js" defer></script>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/src/pages/blog/post.page.05925518.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-4f12729c.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-b9674078.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-340acbf2.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-704646a9.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-afc3f033.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-5e8bbab2.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/src/pages/renderer/_default.page.client.4310c23a.js" as="script" type="text/javascript" crossorigin>
        <link rel="modulepreload" href="https://vchirikov.ru/assets/chunk-6b0f39a3.js" as="script" type="text/javascript" crossorigin>
        <script id="vite-plugin-ssr_pageContext" type="application/json">{"pageContext":{"_pageId":"/src/pages/blog/post","pageProps":{"locale":"en","post":{"matter":{"title":"Ansible on Windows","description":"Today we will run Ansible as a control node on Windows + small talk about VS Code as IDE for Ansible.","date":"2022-11-24","modified_date":"2022-12-22","image":{"background":"_content/img/banners/ansible.png","title":"Ansible on Windows","text":"+ VS Code plugins","theme":"light"}},"code":"/*@jsxRuntime automatic @jsxImportSource solid-jsx*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    a: \"a\",\n    span: \"span\",\n    p: \"p\",\n    strong: \"strong\",\n    code: \"code\",\n    pre: \"pre\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    br: \"br\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.h1, {\n      id: \"ansible\",\n      children: [_jsx(_components.a, {\n        class: \"anchor\",\n        \"aria-hidden\": true,\n        tabindex: \"-1\",\n        href: \"#ansible\",\n        children: _jsx(_components.span, {\n          class: \"icon icon-link\"\n        })\n      }), \"Ansible\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://www.redhat.com/en/technologies/management/ansible\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"Ansible\"\n      }), \" - is an automation platform, which is built on imperative approach.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Unlike Terraform with its declarative approach, here we do not describe the state we want to achieve,\\nbut describe the way to achieve this state, while Ansible gives us idempotence (in simple words\\n, multiple runs will not lead to a change in the final state, for example, running the playbook (a set of actions)\\nof nginx installation 5 times, we won't get 5 reinstallations of the package,but just one installation and 4 checks that it is already there, and no action is required).\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"That's Ansible in short and I don't want to tell more about it, because Ansible has a great docs and community, you can\\nfind it without me anyway. Let's go further to the interest point: \", _jsx(_components.strong, {\n        children: \"Ansible do not support Windows as a control node\"\n      }), \",\\nonly unix-like systems are supported. Well, for these cases Windows has the WSL, which we will use for it.\\nJust in case there is another way to use Ansible with devContainers.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"I use WSL 2 with Ubuntu, \", _jsx(_components.code, {\n        children: \"ubuntu config --default-user root\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      class: \"language-bash\",\n      children: _jsxs(_components.code, {\n        class: \"language-bash code-highlight\",\n        children: [_jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"1\",\n          children: \"wsl\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"2\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# let's install latest python, because ubuntu has an old one\"\n          }), \"\\n\"]\n        }), _jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"3\",\n          children: \"add-apt-repository ppa:deadsnakes/ppa\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"4\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt-get\"\n          }), \" update\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"5\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt-get\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-y\"\n          }), \" python3.11 libffi-dev libssl-dev \\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"6\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# I don't know much about python ecosystem around venv, 2.7 & 3 wars, \"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"7\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# I just want to use something like python-is-python3 ¯\\\\(°_o)/¯\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"8\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"ln\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-s\"\n          }), \" /usr/bin/python3.11 /usr/bin/python\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"9\",\n          children: [\"update-alternatives \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--install\"\n          }), \" /usr/bin/python3 python3 /usr/bin/python3.11 \", _jsx(_components.span, {\n            class: \"token number\",\n            children: \"1\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"10\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# We don't need to store old Ubuntu packages\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"11\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt\"\n          }), \" remove \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--purge\"\n          }), \" python3-apt \", _jsx(_components.span, {\n            class: \"token operator\",\n            children: \"&&\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" python3-apt\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"12\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" python3.11-distutils\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"13\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# check\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"14\",\n          children: [\"update-alternatives \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--config\"\n          }), \" python3\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"15\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--version\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"16\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# install pip\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"17\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" ensurepip \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--upgrade\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"18\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# In case if you don't have ensurepip  ^^^:\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"19\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"20\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# python get-pip.py\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"21\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# check pip:\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"22\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" pip \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-V\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"23\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# upgrade pip\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"24\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" pip \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--upgrade\"\n          }), \" pip\\n\"]\n        }), _jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"25\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"26\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"## let's add pip scripts to PATH (if wsl is under root)\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"27\",\n          children: [_jsx(_components.span, {\n            class: \"token builtin class-name\",\n            children: \"echo\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"'PATH=$PATH:/root/.local/bin/'\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token operator\",\n            children: \">>\"\n          }), \" ~/.bashrc\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"28\",\n          children: [_jsx(_components.span, {\n            class: \"token builtin class-name\",\n            children: \".\"\n          }), \" ~/.bashrc\\n\"]\n        }), _jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"29\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"30\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# let's check venv, use in /tmp/ or in git repo where you can wipe new files\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"31\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" venv \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"env\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"32\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# if you see something like:\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"33\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# Error: Command ... returned non-zero exit status 1\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"34\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# you should install venv\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"35\",\n          children: [_jsx(_components.span, {\n            class: \"token function\",\n            children: \"apt\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" python3.11-venv\\n\"]\n        }), _jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"36\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"37\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# install ansible via pip, if you want to automate Windows machines install pywinrm too\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"38\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" pip \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"--user\"\n          }), \" ansible pywinrm\\n\"]\n        }), _jsx(_components.span, {\n          class: \"code-line line-number\",\n          line: \"39\",\n          children: \"\\n\"\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"40\",\n          children: [_jsx(_components.span, {\n            class: \"token comment\",\n            children: \"# The best linter which works with vscode & redhat ansible plugin\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"41\",\n          children: [\"python \", _jsx(_components.span, {\n            class: \"token parameter variable\",\n            children: \"-m\"\n          }), \" pip \", _jsx(_components.span, {\n            class: \"token function\",\n            children: \"install\"\n          }), \" ansible-lint\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"As IDE for Ansible I use vscode with these extensions (\", _jsx(_components.code, {\n        children: \".vscode/extensions.json\"\n      }), \"):\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      class: \"language-json\",\n      children: _jsxs(_components.code, {\n        class: \"language-json code-highlight\",\n        children: [_jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"recommendations\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"[\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"3\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"redhat.ansible\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"4\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"mattiasbaake.vscode-snippets-for-ansible\\\"\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"5\",\n          children: [\"  \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"6\",\n          children: [_jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The first one is an official plugin for Ansible from RedHat, the second is generated snippets from\\n\", _jsx(_components.a, {\n        href: \"https://docs.ansible.com/ansible/latest/collections/\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"Ansible collections\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Let's run \", _jsx(_components.code, {\n        children: \"code .\"\n      }), \" in WSL to install vscode server, after start we will get an error about \", _jsx(_components.code, {\n        children: \"ansible-lint\"\n      }), \",\\nbecause vs code plugin under wsl uses wrong projectDir.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Workaround is creation of \", _jsx(_components.code, {\n        children: \".config/ansible-lint.yml\"\n      }), \" in the repo, and ansible-lint will find the right \", _jsx(_components.code, {\n        children: \"--project-dir\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You are ready to write playbooks, but run with \", _jsx(_components.code, {\n        children: \"ansible-playbook -i inventory.yaml playbook.yaml\"\n      }), \" is too annoying,\\nlet's use a vscode build task on opened playbook file, create \", _jsx(_components.code, {\n        children: \".vscode/tasks.json\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      class: \"language-json\",\n      children: _jsxs(_components.code, {\n        class: \"language-json code-highlight\",\n        children: [_jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"1\",\n          children: [_jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"2\",\n          children: [\"  \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"version\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"2.0.0\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"3\",\n          children: [\"  \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"tasks\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"[\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"4\",\n          children: [\"    \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"5\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"label\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"Run ansible-playbook on current file\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"6\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"command\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"ansible-playbook -i inventory.yaml ${file} --diff\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"7\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"type\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"shell\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"8\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"args\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"9\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"problemMatcher\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"10\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"presentation\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"11\",\n          children: [\"        \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"reveal\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"always\\\"\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"12\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"13\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"group\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"14\",\n          children: [\"        \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"isDefault\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token boolean\",\n            children: \"true\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"15\",\n          children: [\"        \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"kind\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"build\\\"\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"16\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \",\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"17\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"options\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"18\",\n          children: [\"        \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"env\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"{\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"19\",\n          children: [\"          \", _jsx(_components.span, {\n            class: \"token property\",\n            children: \"\\\"ANSIBLE_DEBUG\\\"\"\n          }), _jsx(_components.span, {\n            class: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            class: \"token string\",\n            children: \"\\\"0\\\"\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"20\",\n          children: [\"        \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"21\",\n          children: [\"      \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"22\",\n          children: [\"    \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"23\",\n          children: [\"  \", _jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"]\"\n          }), \"\\n\"]\n        }), _jsxs(_components.span, {\n          class: \"code-line line-number\",\n          line: \"24\",\n          children: [_jsx(_components.span, {\n            class: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"So the end, you can run now playbooks with default \", _jsx(_components.code, {\n        children: \"ctrl+shift+b\"\n      }), \" in vscode (but I use \", _jsx(_components.code, {\n        children: \"alt+shift+d\"\n      }), \").\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"If something wrong with playbook you can set \", _jsx(_components.code, {\n        children: \"ANSIBLE_DEBUG\"\n      }), \" to 1 and see the full log of a playbook.\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"docs\",\n      children: [_jsx(_components.a, {\n        class: \"anchor\",\n        \"aria-hidden\": true,\n        tabindex: \"-1\",\n        href: \"#docs\",\n        children: _jsx(_components.span, {\n          class: \"icon icon-link\"\n        })\n      }), \"Docs\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Ansible Documentation - \", _jsx(_components.a, {\n          href: \"https://docs.ansible.com/ansible/latest/getting_started/index.html\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Getting started with Ansible\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Not bad introducing article with real case scenario -\", _jsx(_components.br, {}), \"\\n\", _jsx(_components.a, {\n          href: \"https://dev.to/tangramvision/exploring-ansible-via-setting-up-a-wireguard-vpn-3389\",\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Exploring Ansible via Setting Up a WireGuard VPN\"\n        })]\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","filepath":"/_content/en/ansible-on-windows.mdx","locale":"en","slug":"ansible-on-windows","imageHash":"a66f2833bc47572deaedc29f198439f0901ccea2"}},"locale":"en","urlPathname":"/post/ansible-on-windows","urlParsed":{"origin":null,"pathname":"/post/ansible-on-windows","pathnameOriginal":"/post/ansible-on-windows","search":{},"searchAll":{},"searchOriginal":null,"hash":"","hashOriginal":null}}}</script>
      </body>
    </html>